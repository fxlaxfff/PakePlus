import{o as F,j as P,t as T,A}from"./index-DbjPuGEI.js";var S=T('<canvas class="fixed top-0 left-0 w-full h-full bg-green-200">');function R(){let l,c=0,f=[],s=[],i=[],u=0,v=!1;return F(()=>{const r=l.getContext("2d");if(!r)return;const h=window.devicePixelRatio||1,M=window.innerWidth,x=window.innerHeight;l.width=M*h,l.height=x*h,r.translate(l.width/2,l.height),r.scale(1,-1);const k=t=>t*Math.PI/180,g=t=>{if(t.thick<10&&Math.random()<.3)return-1;if(t.thick<2)return i.push({x:t.v0[0],y:t.v0[1],show:!1,opacity:0}),-1;const e=k(t.deg),a=[t.v0[0]+t.len*Math.cos(e),t.v0[1]+t.len*Math.sin(e)],n=s.length;return s.push({v0:t.v0,v1:a,thick:t.thick,progress:0,children:[]}),t.parentIndex!==void 0&&s[t.parentIndex].children.push(n),g({v0:a,len:t.len*.8,thick:t.thick*.8,deg:t.deg+Math.random()*30,parentIndex:n}),g({v0:a,len:t.len*.8,thick:t.thick*.8,deg:t.deg-Math.random()*30,parentIndex:n}),n},m=g({v0:[0,0],len:100*h,thick:20*h,deg:90});m!==-1&&f.push({...s[m]});const I=()=>{for(let t=i.length-1;t>0;t--){const e=Math.floor(Math.random()*(t+1));[i[t],i[e]]=[i[e],i[t]]}},w=t=>{if(r.clearRect(-l.width/2,-l.height,l.width,l.height*2),r.strokeStyle="#000",r.lineCap="round",s.forEach(e=>{if(e.progress>0){const a=[e.v0[0]+(e.v1[0]-e.v0[0])*Math.min(e.progress,1),e.v0[1]+(e.v1[1]-e.v0[1])*Math.min(e.progress,1)];r.beginPath(),r.moveTo(...e.v0),r.lineTo(...a),r.lineWidth=e.thick,r.stroke()}}),v||(f=f.flatMap(e=>{e.progress=Math.min(e.progress+.01,1);const a=s.findIndex(n=>n.v0[0]===e.v0[0]&&n.v0[1]===e.v0[1]&&n.v1[0]===e.v1[0]&&n.v1[1]===e.v1[1]);if(a!==-1&&(s[a].progress=e.progress),e.progress>=1){const n=s.find(o=>o.v0[0]===e.v0[0]&&o.v0[1]===e.v0[1]&&o.v1[0]===e.v1[0]&&o.v1[1]===e.v1[1]);return n?n.children.filter(o=>o!==-1).map(o=>({...s[o],progress:0})):[]}return[e]}),f.length===0&&s.every(e=>e.progress>=1)&&(v=!0,u=t,I())),v){const e=t-u,a=1e3,n=Math.min(e/a,1),o=Math.floor(n*i.length);i.forEach((d,p)=>{if(p<o){d.show=!0;const y=e-p*a/i.length;d.opacity=Math.min(y/200,1)}}),r.fillStyle="#f40",i.forEach(d=>{d.show&&(r.globalAlpha=d.opacity,r.beginPath(),r.arc(d.x,d.y,10,0,2*Math.PI),r.fill())}),r.globalAlpha=1}(!v||i.some(e=>!e.show)||i.some(e=>e.opacity<1))&&(c=requestAnimationFrame(w))};c=requestAnimationFrame(w),P(()=>{cancelAnimationFrame(c)})}),(()=>{var r=S(),h=l;return typeof h=="function"?A(h,r):l=r,r})()}export{R as default};
