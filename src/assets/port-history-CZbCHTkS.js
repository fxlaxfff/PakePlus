import{c as n,m as F,I as N,D as P,f as T,g as J,E as K,k as Q,j as W,F as X,t as c,i as s,S as m,b as f,G as U,d as _,H as Y,e as I,a as Z,p as H,r as D,B as tt,s as j}from"./index-DbjPuGEI.js";import{E as et}from"./app.iconfont-LdJ-0HaC.js";import{e as rt,m as at,s as lt,a as st}from"./scroll-text-DHz9-SHH.js";import{h as nt}from"./history-me3tOM79.js";import{q as it}from"./qr-code-rZfYMI0O.js";var ot=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ct=t=>n(N,F(t,{iconNode:ot,name:"earth"})),dt=ct;const[$,{refetch:gt}]=T(async()=>(await J.queryCollection("soax-port-history").list()).reverse());class b{static instance=null;listeners=new Map;constructor(){}static getInstance(){return b.instance||(b.instance=new b),b.instance}on(e,r){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(r)}off(e,r){this.listeners.get(e)?.delete(r)}emit(e,r){const a=this.listeners.get(e);a&&a.forEach(o=>o(r))}}const v=b.getInstance(),ut=t=>{const e=Math.ceil(t.length/10);return{"current-page":1,"total-page":t.length,"total-item":e,"per-page":10,"middle-page":O(1,e),"left-omit":V(1,e),"right-omit":A(1,e),"current-list":w(t,1,10)}},O=(t,e)=>{const r=new Map([[0,[]],[1,[]],[2,[]],[3,[2]],[4,[2,3]],[5,[2,3,4]]]);return e<=5?r.get(e)||[]:t<=3?[2,3,4]:t>e-3?[e-3,e-2,e-1]:[t-1,t,t+1]},w=(t,e,r)=>{const a=r*(e-1),o=Math.min(a+r,t.length);return t.slice(a,o)},V=(t,e)=>e>5?t>3:!1,A=(t,e)=>e>5?t<=e-3:!1,[l,k]=P(),q=t=>{l["total-item"]>5?k(e=>({...e,...t,"left-omit":V(t["current-page"],l["total-item"]),"right-omit":A(t["current-page"],l["total-item"]),"middle-page":O(t["current-page"],l["total-item"]),"current-list":w($(),t["current-page"],l["per-page"])})):k(e=>({...e,...t,"current-list":w($(),t["current-page"],l["per-page"])}))};K(()=>{Q(()=>{$()&&k({...ut($())})}),v.on("move-page",q),W(()=>{v.off("move-page",q)})});X(gt);var ht=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],pt=t=>n(N,F(t,{iconNode:ht,name:"chevron-left"})),ft=pt,vt=c('<button class="w-8 h-8">'),R=c('<span class="w-8 cursor-not-allowed text-vtx-l-2 dark:text-vtx-d-2">...'),z=c('<button class="w-8 rounded-sm cursor-pointer">'),mt=c('<button class="w-8 h-8 cursor-pointer">'),bt=c('<div class="flex justify-end items-center gap-4 leading-8 text-center select-none font-bold mr-8"><button class="w-8 rounded-sm cursor-pointer">1');function $t(){return(()=>{var t=bt(),e=t.firstChild;return s(t,n(m,{get when(){return l["total-item"]>=5},get children(){var r=vt();return r.$$click=()=>v.emit("move-page",{"current-page":l["current-page"]-1}),s(r,n(ft,{class:"w-4 h-4 mx-auto","stroke-width":3})),f(a=>{var o=l["current-page"]===1,g=l["current-page"]===1,h=l["current-page"]!==1;return o!==a.e&&(r.disabled=a.e=o),g!==a.t&&r.classList.toggle("cursor-not-allowed",a.t=g),h!==a.a&&r.classList.toggle("cursor-pointer",a.a=h),a},{e:void 0,t:void 0,a:void 0}),r}}),e),e.$$click=()=>v.emit("move-page",{"current-page":1}),s(t,n(m,{get when(){return l["left-omit"]},get children(){return R()}}),null),s(t,n(U,{get each(){return l["middle-page"]},children:r=>(()=>{var a=z();return a.$$click=()=>v.emit("move-page",{"current-page":r}),s(a,r),f(o=>_(a,{"bg-blue-500 text-vtx-d-1":l["current-page"]===r},o)),a})()}),null),s(t,n(m,{get when(){return l["right-omit"]},get children(){return R()}}),null),s(t,n(m,{get when(){return l["total-item"]>1},get children(){var r=z();return r.$$click=()=>v.emit("move-page",{"current-page":l["total-item"]}),s(r,()=>l["total-item"]),f(a=>_(r,{"bg-blue-500 text-vtx-d-1":l["current-page"]===l["total-item"]},a)),r}}),null),s(t,n(m,{get when(){return l["total-item"]>=5},get children(){var r=mt();return r.$$click=()=>v.emit("move-page",{"current-page":l["current-page"]+1}),s(r,n(Y,{class:"w-4 h-4 mx-auto","stroke-width":3})),f(a=>{var o=l["current-page"]===l["total-item"],g=l["current-page"]===l["total-item"],h=l["current-page"]!==l["total-item"];return o!==a.e&&(r.disabled=a.e=o),g!==a.t&&r.classList.toggle("cursor-not-allowed",a.t=g),h!==a.a&&r.classList.toggle("cursor-pointer",a.a=h),a},{e:void 0,t:void 0,a:void 0}),r}}),null),f(r=>_(e,{"bg-blue-500 text-vtx-d-1":l["current-page"]===1},r)),t})()}I(["click"]);var xt=c('<table class="table-auto w-full border-separate border-spacing-0 overflow-hidden"><caption class="text-2xl font-bold tracking-widest my-4 text-left">Soax端口使用记录</caption><thead><tr class="bg-vbg-l-3 dark:bg-vbg-d-3"></tr></thead><tbody class="text-sm font-semibold tracking-widest"></tbody><tfoot><tr class="bg-vbg-l-3 dark:bg-vbg-d-3 text-sm"><th class="leading-12 tracking-widest">总计：</th><th>'),_t=c('<th class="relative first:leading-12 not-last:after:absolute not-last:after:top-1/2 not-last:after:-translate-y-1/2 not-last:after:end-0 not-last:after:w-0.25 not-last:after:h-4 not-last:after:bg-vbg-l-1 dark:not-last:after:bg-vbg-d-1"scope=col><div class="flex items-center justify-center gap-1"><span class=tracking-widest>'),wt=c('<tr><th class=py-8><div class="flex flex-col gap-4 items-center"><span class=tracking-widest>空空如也'),kt=c('<button class="text-blue-500 cursor-pointer">查看'),yt=c('<tr class="text-center hover:bg-vbg-l-1 dark:hover:bg-vbg-d-1 duration-200"><td class="leading-12 tracking-widest cursor-pointer"></td><td class="text-vtx-l-2 dark:text-vtx-d-2"></td><td></td><td class="text-vtx-l-2 dark:text-vtx-d-2"></td><td></td><td class="text-vtx-l-2 dark:text-vtx-d-2"></td><td>');function Ct(){const t=[{icon:n(rt,{class:"w-4 h-4"}),title:"端口号"},{icon:n(nt,{class:"w-4 h-4"}),title:"使用时间"},{icon:n(dt,{class:"w-4 h-4"}),title:"国家"},{icon:n(at,{class:"w-4 h-4"}),title:"地区"},{icon:n(lt,{class:"w-4 h-4"}),title:"运营商"},{icon:n(st,{class:"w-4 h-4"}),title:"备注"},{icon:n(it,{class:"w-4 h-4"}),title:"二维码"}];return(()=>{var e=xt(),r=e.firstChild,a=r.nextSibling,o=a.firstChild,g=a.nextSibling,h=g.nextSibling,B=h.firstChild,x=B.firstChild;x.firstChild;var y=x.nextSibling;return s(o,n(Z,{each:t,children:i=>(()=>{var u=_t(),d=u.firstChild,p=d.firstChild;return s(d,()=>i().icon,p),s(p,()=>i().title),u})()})),s(g,n(U,{get each(){return l["current-list"]},get fallback(){return(()=>{var i=wt(),u=i.firstChild,d=u.firstChild,p=d.firstChild;return s(d,n(et,{width:79,height:86}),p),f(()=>j(u,"colspan",t.length)),i})()},children:i=>(()=>{var u=yt(),d=u.firstChild,p=d.nextSibling,C=p.nextSibling,S=C.nextSibling,E=S.nextSibling,L=E.nextSibling,G=L.nextSibling;return d.$$click=async()=>{await navigator.clipboard.writeText(`${i.port}`).then(()=>{H.success(`${i.port} 复制成功`)}).catch(()=>{H.error("复制失败")})},s(d,()=>i.port),s(p,()=>i["create-time"]),s(C,()=>D[i.nation]?.zhname),s(S,()=>i.region?`${i.region?.abbr||""} ${i.region?.zh}`:"-"),s(E,()=>i.operator?.name||"-"),s(L,()=>i.remark.toUpperCase()),s(G,n(m,{get when(){return i.url},get children(){var M=kt();return M.$$click=()=>{tt.emit("open-popover",{type:"check-qrcode",data:i})},M}})),u})()})),s(x,()=>l["total-page"],null),s(y,n($t,{})),f(()=>j(y,"colspan",t.length-1)),e})()}I(["click"]);var St=c('<main class="w-4/5 rounded-2xl p-4 bg-vbg-l-2 dark:bg-vbg-d-2 shadow-lg shadow-vtx-d-2/50 dark:shadow-vtx-l-2/50">');function qt(){return(()=>{var t=St();return s(t,n(Ct,{})),t})()}export{qt as default};
